<div class="audit-calendar-section">
  <!-- Calendar Header -->
  <app-card>
    <app-card-header>
      <div class="calendar-header">
        <app-card-title className="calendar-title">
          <span class="calendar-icon">ðŸ“…</span>
          <span>Audit Calendar</span>
        </app-card-title>
        <div class="calendar-controls">
          <app-button
            variant="outline"
            size="sm"
            (onClick)="previousMonth()"
            className="calendar-nav-button">
            <span class="nav-icon">â—€</span>
          </app-button>
          <span class="calendar-month">
            {{ monthNames[currentMonth] }} {{ currentYear }}
          </span>
          <app-button
            variant="outline"
            size="sm"
            (onClick)="nextMonth()"
            className="calendar-nav-button">
            <span class="nav-icon">â–¶</span>
          </app-button>
        </div>
      </div>
    </app-card-header>
    <app-card-content>
      <!-- Calendar Grid -->
      <div class="calendar-grid">
        <!-- Day headers -->
        <div
          *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']"
          class="calendar-day-header">
          {{ day }}
        </div>
        <!-- Calendar days -->
        <div
          *ngFor="let dayData of getCalendarDays(); let i = index"
          [class]="dayData ? 'calendar-day' : 'calendar-day-empty'">
          <div *ngIf="dayData" class="day-content">
            <div class="day-number">{{ dayData.day }}</div>
            <div class="day-audits">
              <div
                *ngFor="let audit of dayData.audits.slice(0, 2); trackBy: trackByAuditId"
                class="audit-item"
                (click)="onAuditClick(audit)"
                [title]="audit.supplier + ' - ' + audit.auditType + ' at ' + audit.time">
                {{ audit.supplier }}
              </div>
              <div
                *ngIf="dayData.audits.length > 2"
                class="more-audits">
                +{{ dayData.audits.length - 2 }} more
              </div>
            </div>
          </div>
        </div>
      </div>
    </app-card-content>
  </app-card>

  <!-- Audit Legend and Summary -->
  <div class="calendar-summary">
    <app-card>
      <app-card-header>
        <app-card-title className="summary-title">Legend</app-card-title>
      </app-card-header>
      <app-card-content className="legend-content">
        <div class="legend-item">
          <div class="legend-color legend-upcoming"></div>
          <span class="legend-text">Upcoming Audits</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-passed"></div>
          <span class="legend-text">Passed Audits</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-failed"></div>
          <span class="legend-text">Failed Audits</span>
        </div>
      </app-card-content>
    </app-card>

    <app-card>
      <app-card-header>
        <app-card-title className="summary-title">This Month Summary</app-card-title>
      </app-card-header>
      <app-card-content className="summary-content">
        <div class="summary-item">
          <span class="summary-label">Upcoming Audits:</span>
          <span class="summary-value">3</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Completed Audits:</span>
          <span class="summary-value">2</span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Success Rate:</span>
          <span class="summary-value success">50%</span>
        </div>
      </app-card-content>
    </app-card>
  </div>
</div>
