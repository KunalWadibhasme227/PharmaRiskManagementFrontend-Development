<div class="upcoming-audits-section">
  <!-- Header with Search, Filters, and Actions -->
  <div class="audits-header">
    <div class="audits-filters">
      <div class="search-container">
        <div class="search-icon">🔍</div>
        <app-input placeholder="Search audits by supplier or keyword..." [value]="searchTerm"
          (onInput)="onSearchChange($event)" className="search-input">
        </app-input>
      </div>
      <!-- <div class="filter-container">
        <app-select [value]="filterStatus">
          <app-select-trigger placeholder="Filter" className="filter-select">
            <span class="filter-icon">🔽</span>
            {{ filterStatus === 'all' ? 'All Status' : filterStatus }}
          </app-select-trigger>
          <app-select-content>
            <app-select-item value="all" (click)="onFilterChange('all')">All Status</app-select-item>
            <app-select-item value="confirmed" (click)="onFilterChange('confirmed')">Confirmed</app-select-item>
            <app-select-item value="scheduled" (click)="onFilterChange('scheduled')">Scheduled</app-select-item>
            <app-select-item value="pending" (click)="onFilterChange('pending')">Pending</app-select-item>
            <app-select-item value="in-progress" (click)="onFilterChange('in-progress')">In Progress</app-select-item>
          </app-select-content>
        </app-select>
      </div> -->
    </div>
    <app-button variant="default" (onClick)="onScheduleAudit()" className="schedule-audit-button">
      <span class="button-content">
        <span class="button-icon">+</span>
        <span>Schedule Audit</span>
      </span>
    </app-button>
  </div>

  <!-- Audit List -->
  <app-card>
    <app-card-header>
      <app-card-title>Upcoming Audits ({{ upcomingAudits.length }})</app-card-title>
    </app-card-header>
    <app-card-content>
      <app-scroll-area className="h-96">
        <div class="audits-list">
          <div *ngFor="let audit of upcomingAudits;" class="audit-card">
            <div class="audit-card-header">
              <div class="audit-details">
                <div class="audit-title-row">
                  <h4 class="audit-supplier">{{ audit.supplierId }}</h4>
                  <app-badge [variant]="getStatusBadgeVariant(audit.statusId)">
                    {{ getStatusBadgeText(audit.statusId) }}
                  </app-badge>
                  <!-- <app-badge>
                    {{ audit.priority}}
                  </app-badge> -->
                </div>
                <p class="audit-type">{{ audit.auditTypeName }}</p>
              </div>
            </div>

            <div class="audit-info-grid">
              <div class="audit-info-item">
                <div class="info-icon">📅</div>
                <span class="info-text">{{ getFormattedDateTime(audit.auditDate) }}</span>
              </div>
              <div class="audit-info-item">
                <div class="info-icon">⏱️</div>
                <span class="info-text"
                  [ngStyle]="{'color': (audit.auditDate | remainingDuration) === 'Expired' ? 'red' : 'inherit'}">
                  Duration: {{ audit.auditDate | remainingDuration }}
                </span>
              </div>
              <div class="audit-info-item">
                <div class="info-icon">👤</div>
                <span class="info-text">{{ audit.auditorName }}</span>
              </div>
              <div class="audit-info-item">
                <div class="info-icon">📍</div>
                <span class="info-text">{{ audit.location ?? '---' }}</span>
              </div>
            </div>

            <div class="audit-actions">
              <app-button variant="outline" size="sm" (onClick)="onViewDetails(audit)" className="audit-action">
                <span class="action-content">
                  <span class="action-icon">👁️</span>
                  <span>View Details</span>
                </span>
              </app-button>
              <app-button variant="outline" size="sm" (onClick)="onReschedule(audit)" className="audit-action">
                <span class="action-content">
                  <span class="action-icon">📅</span>
                  <span>Reschedule</span>
                </span>
              </app-button>
            </div>
          </div>
        </div>
      </app-scroll-area>
    </app-card-content>
  </app-card>
  <div class="card-footer pagination-controls">
    <app-button variant="outline" size="sm" (onClick)="prevPage()" [disabled]="!canGoPrev() || loading">
      Previous
    </app-button>

    <span class="page-info">Page {{ pageNumber }} of {{ totalPages }}</span>

    <app-button variant="outline" size="sm" (onClick)="nextPage()" [disabled]="!canGoNext() || loading">
      Next
    </app-button>
  </div>

  <!-- Schedule Audit Modal -->
  <app-schedule-audit-modal [isOpen]="isScheduleModalOpen" (onClose)="onScheduleModalClose()"
    (onSubmit)="onScheduleModalSubmit($event)">
  </app-schedule-audit-modal>
</div>